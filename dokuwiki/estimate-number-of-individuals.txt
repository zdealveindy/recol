====== Estimate the number of mollusc individuals at a given concentration of soil Ca ======


**Dataset:** [[recol:data:molluscs|Communities of molluscs on spring fens of West Carpathian Mountains, Europe]]
{{ recol:figures:v_enniensis.jpg?200|}}

**Aim**: Estimate the number of mollusc individuals at the concentration of Ca = 200 mg/l.

**Theoretical background**: Molluscs species usually build their shell from calcium (Ca) available in the habitat. A commonly observed pattern in nature is that stands richer in Ca host more individuals of molluscs (and sometimes also more species). It seems that the concentration of Ca in the soil or water is a good predictor of mollusc abundance.

**What to do:**:
  - Import the ''molluscs-fens.txt'' and ''env-fens.txt'' data into R. You can do it directly using the [[recol:data:molluscs#script_for_direct_import_of_data_to_r|Script for direct import of data into R]] and create objects ''moll'' and ''env''. The ''moll'' contains a data frame with mollusc species (in columns) and sampled plots (in rows), and each cell of the data frame represents the __number of mollusc individuals__ of given species in a given plot. The ''env'' data frame contains environmental variables measured in each plot.
  - First, calculate the total number of mollusc individuals for each plot (rows in ''moll'' data frame). 
  - You need to calculate the relationship between //the number of mollusc individuals// and the concentration of Ca in the spring fen water (variable ''Ca'' in ''env'' data frame). But since both variables have right-skewed distribution of values, you need to log-transform them first (use log<sub>10</sub> function on both the number of mollusc individuals and Ca concentration). 
  - Calculate linear regression between the log-transformed number of mollusc individuals and the log-transformed concentration of Ca.
  - Predict the estimated number of mollusc individuals for the concentration of Ca = 200 mg/l.

<fc #ff0000>Copy the following code at the end of your R code and replace ?? with calculated values:</fc>
<code>
# R2 = ??
# F-value = ??
# P = ??
# NO.IND_Ca200 = ?? (See the note below)
</code>
**Note:** ''NO.IND_Ca200'' is the number of individuals predicted by the linear model for the concentration of Ca equal to 200 mg/l. Report the real count of individuals, not the logarithmic value which is predicted by the model. The value you should report will be larger than 100 and lower than 500 (if the value is smaller, then you perhaps forgot to recalculate the logarithm into the exponential form).

The prediction can be visualized using the following schema (note that x- and y-axes are on a log scale, and the <fc #ff0000>???</fc> is the value you should calculate). **You can try to draw also this figure if you want! (although you get no extra credit for that, just a good feeling that you can accomplish that...)**
{{:recol:figures:predicted-number-of-mollusc-individuals_with-arrow.jpg?nolink|}}

<hidden For hints, click here â˜›>
  - Import data directly from the Internet (using provided code in the Data description)
  - ''rowSums''. Note - this time we are not interested in //the number of species//, but //the number of individuals//.
  - ''log10''
  - ''lm''
  - ''predict'' applied on results of ''lm''; needs to modify arguments ''newdata''. Remember that both Ca and //number of individuals// values are log-transformed. You need first to calculate log<sub>10</sub> (200) to log-transform Ca concentration; then you use this value in ''predict'' function. The predicted value is log<sub>10</sub> of the number of individuals - you need to transform this log value back into the real number of individuals (''10^log.no.ind'').
  - see [[recol:lm]]
</hidden>


\\
----
[[recol:exercise:estimate-number-of-individuals:estimate-number-of-individuals_solution|Solution]]