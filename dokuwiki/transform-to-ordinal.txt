~~NOTOC~~
====== Transform the percentage cover values into ordinal scale ======
//Prepared by David Zelený//

In vegetation ecology, researchers often visually estimate the cover of plant species in the sampled communities. One option is to directly use percentage values for individual plant species, but more common is to use values on an ordinal scale (ordinal scale = values are sorted, but distances between the values are not the same; an example of ordinal scale is encoding of verbal temperature expression cold < warm < hot into numerical ordinal scale 1 < 2 < 3). Vegetation ecologists often use the so-called //Braun-Blanquet cover scale// for estimating the cover of species in the plot, which is faster and more efficient than using the percentage scale.

Table of Braun-Blanquet cover scale used to estimate the species cover (zero should stay zero):
^ Percentage cover value  ^ Braun-Blanquet code  ^ Ordinal value  ^
| 0                       | 0                    | 0              |
| > 0 & ≤ 1               | r                    | 1              |
| > 1 & ≤ 2               | +                    | 2              |
| > 2 & ≤ 3               | 1                    | 3              |
| > 3 & ≤ 25              | 2                    | 4              |
| > 25 & ≤ 50             | 3                    | 5              |
| > 50 & ≤ 75             | 4                    | 6              |
| > 75 & ≤ 100            | 5                    | 7              |

**What to do:**

  - Write a function ''transform2brbl (data)'', which will be able to transform the percentage values of species covers supplied into the argument ''data'' into ordinal values (0-7) using the Braun-Blanquet scale above. Note: do not transform the values into the Braun-Blanquet code (0, r, +, 1, 2, 3, 4, 5), but into the numerical ordinal value (0, 1, 2, 3, 4, 5, 6, 7), so as it can be (potentially) used in further numerical analyses (the original Braun-Blanqued codes contain ''r'' and ''+'', which cannot be meaningfully mixed with numbers 1 to 5).
  - When you finish the function definition, do the two tests detailed below to see its functionality:
    - Use species data from Vltava dataset:<code rsplus>
vltava.spe <- read.delim ('https://raw.githubusercontent.com/zdealveindy/recol/main/data/vltava-spe.txt', row.names = 1)
transform2brbl (vltava.spe)[1:10, 1:10]
</code>You should get the following result:<file>
   Abiealb23 Acerpla23 Acerpse23 Alnuglu23 Alnuinc23 Berbvul23 Betupen23 Carpbet23 Coryave23 Cratspe23
1          0         0         0         0         0         0         0         0         4         0
2          0         0         0         0         0         0         0         0         2         0
3          0         0         0         0         0         0         0         0         5         0
4          0         0         0         0         0         0         0         0         4         0
5          0         0         0         5         0         0         0         0         0         0
6          0         5         0         0         0         0         0         0         4         0
7          0         0         2         0         0         0         0         5         4         0
8          0         0         2         0         0         0         0         0         4         0
9          0         2         0         0         0         0         3         0         3         0
10         0         0         0         0         0         0         2         0         3         0
</file>
    - Use the vector with predefined values<code rsplus>
transform2brbl (0:100)
</code>and you should get:<file>
  [1] 0 1 2 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5
 [33] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6
 [65] 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
 [97] 7 7 7 7 7
</file>

<hidden For hints click here ☛>
Perhaps the easiest way is to use the sequence of ''ifelse'' functions, nested within each other. Alternatively, you may use ''for'' loop, and evaluate each element of the matrix independently using ''if'' and ''else'' construct. Do not forget that zero cover should stay zero!
</hidden>

----
===== Examples of vegetation sampling while using Braun-Blanquet cover scale =====

[{{:recol:figures:samplingbrbl_1.jpg?nolink|Sampling vegetation plot (Methods of Vegetation Survey, 2016)}}]

[{{:vegsurvey:photos:dsc_3592-2.jpg?direct&400|Indoor experiment - artificial vegetation plot with a known cover of each species...}}]
\\
[{{:vegsurvey:photos:dsc_3612.jpg?direct&500|Here we go: resulting table for the plot, written in values of extended Braun-Blanquet scale (the value 2 is separated into 2m, 2a and 2b).}}] 

----

[[recol:exercise:transform-to-ordinal:transform-to-ordinal_solution|Solution]]
