# Benford's law - Solution

``` rsplus
# Definition of the function:
follow.benford <- function (data)
{
  splitted.data <- stringr::str_split (data, pattern = '')
  d1 <- unlist (lapply (splitted.data, FUN = function (x) x[x != '0' & x != '-' & x != '.'][1]))
  d1 <- factor (d1, levels = as.character (1:9))
  prop.d1 <- table (d1)/sum (table(d1))
  benford.d1 <- log10 (((1:9)+1)/(1:9))
  barplot (rbind (prop.d1, benford.d1), beside = T, legend = c('data', 'Benford'))
}

# Example of use: Population of countries in the World
pop <- readr::read_delim ('https://gist.githubusercontent.com/zdealveindy/87f6ac90e989a1dc4c6b41ffd3230cce/raw/43f6261deb22cdf28e70e249c2934c22801483c8/population-of-countries-in-the-world.txt', delim = '\t')
follow.benford (pop$Population)
title (main = 'Population of countries in the World')

# Example of use: leaf area data
data.LA <- readr::read_delim ('https://gist.githubusercontent.com/zdealveindy/9efbebf002d3cccc7528be38309ffffb/raw/528a46e9d1b53821cf92354a5a548ee68bdcfee2/wet-dry-leaf-area.txt', delim = '\t')
follow.benford (data.LA$Wet.area.cm2)
title (main = 'Leaf area')

```

Remember that the function needs to deal also with negative values, not
only positive. Here is an artificial dataset (originally phosphorus
concentration in the soil in one of my projects, but I just make all the
values negative):

``` rsplus
data3 <- read.delim ("https://gist.githubusercontent.com/zdealveindy/89a217f6036edea167c7ad3b7216e64c/raw/2156802b9b04fb9a3b4e67967d4cf7b10b503479/soil_phosphorus_negative.txt")
follow.benford (data3$P_negative)
title (main = 'Phosphorus')
```

![benford-on-negative-soil-phosphorus.png](/recol/figures/benford-on-negative-soil-phosphorus.png){query="?nolink"}

The alignment to Benford is not perfect, but that is not the point. The
important thing is that the real values are displayed as they should be.
Do they also for your function?
